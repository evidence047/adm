<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Student Login & Registration</title>
  <link rel="stylesheet" href="index.css">
</head>
<body>
  <!-- Preloader -->
  <div id="preloader">
    <div class="loader"></div>
  </div>

  <!-- Main container -->
  <div class="container" id="mainContainer">
    <!-- Login form -->
    <div id="loginFormContainer">
      <h1>Student Login</h1>
      <div class="error" id="loginError"></div>
      <form id="loginForm">
        <label for="loginStudentName">Student Name</label>
        <input type="text" id="loginStudentName" name="loginStudentName" placeholder="Enter student name" required>

        <label for="loginAdmissionNo">Admission No</label>
        <input type="text" id="loginAdmissionNo" name="loginAdmissionNo" placeholder="Enter admission number" required>

        <button type="submit">Login</button>
      </form>
      <div class="switch" onclick="showRegister()">New student? Register here</div>
    </div>

    <!-- Registration form -->
    <div id="registerFormContainer" style="display:none;">
      <h1>Student Registration</h1>
      <div class="error" id="registerError"></div>
      <form id="registerForm">
        <label for="regStudentName">Student Name</label>
        <input type="text" id="regStudentName" name="regStudentName" placeholder="Enter student name" required>

        <label for="regEmail">Email</label>
        <input type="email" id="regEmail" name="regEmail" placeholder="Enter your email" required>

        <label for="regAdmissionNo">Admission No</label>
        <input type="text" id="regAdmissionNo" name="regAdmissionNo" placeholder="Create admission number" required>

        <button type="submit">Register</button>
      </form>
      <div class="switch" onclick="showLogin()">Already registered? Login here</div>
    </div>

    <!-- Personal Details Button -->
    <div style="text-align: center; margin-top: 20px;">
      <button id="personalBtn">View Personal Details</button>
      <div id="personalInfo" style="display:none; margin-top:15px; text-align:left; background:#f0f8ff; padding:15px; border-radius:10px; color:#333; max-width:360px; margin-left:auto; margin-right:auto;">
        <p><strong>Name:</strong> Kevin Okari</p>
        <p><strong>University:</strong> Jaramogi Oginga Odinga University</p>
        <p><strong>Passion:</strong> Technology and building websites/apps</p>
        <p><strong>Goal:</strong> Create simple, user-friendly tools for students</p>
      </div>
    </div>
  </div>

  <script>
    // Dummy storage for registered students (client-side only)
    const students = [];

    // Show Register form
    function showRegister(){
      document.getElementById('loginFormContainer').style.display = 'none';
      document.getElementById('registerFormContainer').style.display = 'block';
    }

    // Show Login form
    function showLogin(){
      document.getElementById('registerFormContainer').style.display = 'none';
      document.getElementById('loginFormContainer').style.display = 'block';
    }

    // Registration form handler
    document.getElementById('registerForm').addEventListener('submit', function(e){
      e.preventDefault();
      const studentName = document.getElementById('regStudentName').value;
      const email = document.getElementById('regEmail').value;
      const admissionNo = document.getElementById('regAdmissionNo').value;

      const existingStudent = students.find(st => st.studentName === studentName);
      if(existingStudent){
        document.getElementById('registerError').textContent = 'Student already registered!';
        return;
      }

      students.push({studentName, email, admissionNo});
      alert('Registration successful! You can now login.');
      document.getElementById('registerForm').reset();
      showLogin();
    });

    // Login form handler
    document.getElementById('loginForm').addEventListener('submit', function(e){
      e.preventDefault();
      const studentName = document.getElementById('loginStudentName').value;
      const admissionNo = document.getElementById('loginAdmissionNo').value;

      const student = students.find(st => st.studentName === studentName && st.admissionNo === admissionNo);
      if(student){
        window.location.href = "homepage.html";
      } else {
        document.getElementById('loginError').textContent = 'Invalid student name or admission no!';
      }
    });

    // Preloader functionality with 4-second delay
    window.addEventListener('load', () => {
      const preloader = document.getElementById('preloader');
      const container = document.getElementById('mainContainer');

      setTimeout(() => {
        preloader.style.opacity = 0;
        setTimeout(() => {
          preloader.style.display = 'none';
          container.classList.add('show'); // fade-in main container
        }, 500); // fade-out duration
      }, 2000); // 4 seconds preloader
    });

    // Show/hide personal details
    const personalBtn = document.getElementById('personalBtn');
    const personalInfo = document.getElementById('personalInfo');

    personalBtn.addEventListener('click', () => {
      if(personalInfo.style.display === "none"){
        personalInfo.style.display = "block";
        personalBtn.textContent = "Hide Personal Details";
      } else {
        personalInfo.style.display = "none";
        personalBtn.textContent = "View Personal Details";
      }
    });
  </script>
</body>
</html>
